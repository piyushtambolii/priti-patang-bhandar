// --- TRANSLATION CONTENT ---
        const translations = {
            en: {
                brandName: '<span class="font-kalam">Preeti Patang Bhandar</span>',
                navAbout: 'About Us',
                navProducts: 'Products',
                navGallery: 'Gallery',
                navContact: 'Contact',
                heroTitle: 'Preeti Patang Bhandar',
                heroSubtitle: "Pintubhau's Special Strong <span class='font-bold'>Manja</span>",
                heroDescription: 'The most trusted name in Nandurbar for kites and threads since 1992.',
                heroCta: 'Browse Our Products',
                galleryTitle: 'Our Threads & Manja Gallery',
                slide1Title: 'Special Manja',
                slide1Desc: 'Our custom-made strong manja',
                slide2Title: 'Multi-Color Manja',
                slide2Desc: 'All types of multi-color manja available',
                slide3Title: 'Ready Spools (1000 Vaar)',
                slide3Desc: 'Ready-to-fly spools from various brands',
                slide4Title: 'Manja for Kids',
                slide4Desc: 'Safe and durable manja for kids',
                kitesGalleryTitle: 'Kites Gallery',
                slide5Title: 'Designer Kites',
                slide5Desc: 'We have all types of designer kites',
                slide6Title: 'Kites for Kids',
                slide6Desc: 'Special, safe kites for children',
                slide7Title: 'All Kite Sizes',
                slide7Desc: 'Small, medium, and large kites available',
                slide8Title: 'Colorful Kites',
                slide8Desc: 'Multi-colored kites to suit your choice',
                aboutTitle: 'Our History',
                aboutText1: "<strong>'Preeti Patang Bhandar'</strong> was started by <strong>Shri. Rameshwar Pandharinath Sangpal (Pintubhau Lohar)</strong> in 1992, right here in Nandurbar, Maharashtra.",
                aboutText2: "We specialize in selling `Patang` (kites) and `Manja` (thread) for the world-famous `Makar Sankranti` festival. The `Manja` is the most important part of flying a kite, and that's our specialty!",
                aboutGoal: 'Our goal is simple: Excellent Quality Products!',
                specialtyTitle: 'Our Specialty - The Perfect `Manja`',
                specialtyText: 'We create custom `Manja` to your liking: multi-colored, glass-coated, or non-glass-coated. Quality is our top priority.',
                specialtyQuote: '"Use it once... you\'ll always ask for our `Manja` again!"',
                specialtyQuoteMarathi: '(<span class="font-baloo">एकदा वापराल...... पुन्हा आमच्याकडचाच मांजा मागाल.....</span>)',
                productsTitle: 'Our Key Products',
                product1Title: 'Safe `Manja` for Kids',
                product1Text: 'Specially made strong `Manja` for children, available with and without glass coating for safe fun.',
                product2Title: 'Variety of `Manja` Spools',
                product2Text: '`Manja` from various brands, available in all sizes: 1000 `Vaar` (900m), 2500 `Vaar` (250gm), 5000 `Vaar` (500gm), and more.',
                product3Title: 'Special Ready-Made `Chakri`',
                product3Text: 'We also have ready-to-fly spools (`Chakri`) with our special, handmade thread. Come and try our custom `Manja`!',
                contactTitle: 'Contact Us',
                contactInfoTitle: 'Contact Info',
                contactName1: 'Prop. Rameshwar P. Lohar (Pintubhau)',
                contactName2: 'Prop. Aadarsh R. Sangpal',
                addressTitle: 'Our Address',
                addressText: 'In front of Maharashtra Gym, Juna Bel Bazar, Tilak Road, Nandurbar, Maharashtra',
                mapButton: 'View on Google Maps',
                copyright: 'Preeti Patang Bhandar. All rights reserved.'
            },
            mr: {
                brandName: '<span class="font-baloo">प्रीती पतंग भांडार</span>',
                navAbout: 'आमच्याबद्दल',
                navProducts: 'उत्पादने',
                navGallery: 'गॅलरी',
                navContact: 'संपर्क',
                heroTitle: 'प्रीती पतंग भांडार',
                heroSubtitle: "पिंटुभाऊ स्पेशल पतंगाचा <span class='font-bold'>मजबूत मांजा</span>",
                heroDescription: 'सन १९९२ पासून नंदुरबार जिल्ह्यातील सर्वात विश्वासू पतंग आणि मांजा विक्रेते.',
                heroCta: 'आमची उत्पादने पहा',
                galleryTitle: 'आमचा मांजा आणि गॅलरी',
                slide1Title: 'स्पेशल मांजा',
                slide1Desc: 'आमचा खास बनवलेला मजबूत मांजा',
                slide2Title: 'बहुरंगी मांजा',
                slide2Desc: 'सर्व प्रकारच्या बहुरंगी मांजा उपलब्ध',
                slide3Title: 'तयार चक्री (1000 वार)',
                slide3Desc: 'विविध कंपन्यांच्या तयार चक्री',
                slide4Title: 'लहान मुलांसाठी मांजा',
                slide4Desc: 'सुरक्षित आणि टिकाऊ पतंग व मांजा',
                kitesGalleryTitle: 'पतंग गॅलरी',
                slide5Title: 'डिझायनर पतंग',
                slide5Desc: 'आमच्याकडे सर्व प्रकारच्या डिझायनर पतंग आहेत',
                slide6Title: 'लहान मुलांसाठी पतंग',
                slide6Desc: 'लहान मुलांसाठी खास, सुरक्षित पतंग',
                slide7Title: 'सर्व आकाराचे पतंग',
                slide7Desc: 'लहान, मध्यम, आणि मोठ्या आकाराचे पतंग उपलब्ध',
                slide8Title: 'बहुरंगी पतंग',
                slide8Desc: 'आपल्या आवडीनुसार बहुरंगी पतंग',
                aboutTitle: 'आमचा इतिहास',
                aboutText1: "<strong>'प्रीती पतंग भांडार'</strong> हा व्यवसाय <strong>श्री. रामेश्वर पंढरीनाथ संगपाळ (पिंटुभाऊ लोहार)</strong> यांनी सन १९९२ पासून महाराष्ट्रातील नंदुरबार जिल्ह्यात सुरु केला.",
                aboutText2: "भारतात विशेषतः गुजरात येथे प्रसिद्ध असलेल्या 'Makar Sankranti' साठी लागणारे पतंग (Kites) तसेच मांजा (Thread) यांची विक्री आम्ही करतो. पतंग उडवण्यासाठी मांजा हा महत्त्वाचा असतो, आणि हेच आमचे वैशिष्ट्य!",
                aboutGoal: 'उत्तम गुणवत्तापूर्ण उत्पादन हेच आमचं ध्येय!',
                specialtyTitle: 'आमचे वैशिष्ट्य - स्पेशल मांजा',
                specialtyText: 'आमच्या येथे बहुरंगी, काचेचा वा विना काचेचा स्पेशल मांजा हा आपल्या आवडीनुसार बनवून मिळतो. आम्ही गुणवत्तेला सर्वाधिक प्राधान्य देतो.',
                specialtyQuote: '"एकदा वापराल...... पुन्हा आमच्याकडचाच मांजा मागाल....."',
                specialtyQuoteMarathi: '', // Hide the english part
                productsTitle: 'आमची प्रमुख उत्पादने',
                product1Title: 'लहान मुलांसाठी मांजा',
                product1Text: 'लहान मुलांसाठी खास बनवलेला, विनाकाचेचा आणि काचेचा मजबूत मांजा. सुरक्षित आणि टिकाऊ.',
                product2Title: 'विविध मांजा चक्री',
                product2Text: '1000 वार (900 मीटर), 2500 वार (250 ग्रॅम), 5000 वार (500 ग्रॅम) असा विविध कंपन्यांचा मांजा उपलब्ध आहे.',
                product3Title: 'स्पेशल तयार चक्री',
                product3Text: 'आमच्या बनवलेल्या स्पेशल दोऱ्याची तयार चक्री सुद्धा उपलब्ध आहे. आमचा बनवलेला मांजा अवश्य वापरून खात्री करा.',
                contactTitle: 'आमच्याशी संपर्क साधा',
                contactInfoTitle: 'संपर्क माहिती',
                contactName1: 'प्रो. रामेश्वर पी. लोहार (पिंटुभाऊ)',
                contactName2: 'प्रो. आदर्श आर. संगपाळ',
                addressTitle: 'आमचा पत्ता',
                addressText: 'महाराष्ट्र व्यायाम शाळा समोर, जुना बैल बाजार, टिळक रोड, नंदुरबार, महाराष्ट्र',
                mapButton: 'Google Maps वर पहा',
                copyright: 'प्रीती पतंग भांडार. सर्व हक्क राखीव.'
            }
        };

        // --- LANGUAGE SWITCHER LOGIC ---
        document.addEventListener('DOMContentLoaded', () => {
            const langEnBtn = document.getElementById('lang-en');
            const langMrBtn = document.getElementById('lang-mr');
            const buttons = [langEnBtn, langMrBtn];

            function updateLanguage(lang) {
                // Set HTML lang attribute
                document.documentElement.lang = lang;

                // Update text content
                const content = translations[lang];
                document.querySelectorAll('[data-key]').forEach(element => {
                    const key = element.getAttribute('data-key');
                    if (content[key] !== undefined) {
                        element.innerHTML = content[key];
                    }
                });

                // Update button styles
                buttons.forEach(btn => {
                    if (btn.dataset.lang === lang) {
                        btn.classList.add('lang-active');
                        btn.classList.remove('lang-inactive');
                    } else {
                        btn.classList.add('lang-inactive');
                        btn.classList.remove('lang-active');
                    }
                });
                
                // Apply/Remove Marathi fonts
                const elementsToFont = document.querySelectorAll('[data-key="heroTitle"], [data-key="aboutTitle"], [data-key="specialtyTitle"], [data-key="productsTitle"], [data-key="galleryTitle"], [data-key="contactTitle"], [data-key="kitesGalleryTitle"]');
                if (lang === 'mr') {
                    elementsToFont.forEach(el => el.classList.add('font-baloo'));
                } else {
                    elementsToFont.forEach(el => el.classList.remove('font-baloo'));
                }
                
                // Store preference
                localStorage.setItem('language', lang);
            }

            buttons.forEach(btn => {
                btn.addEventListener('click', () => updateLanguage(btn.dataset.lang));
            });

            // On page load, set preferred language (default to Marathi)
            const preferredLang = localStorage.getItem('language') || 'mr';
            updateLanguage(preferredLang);
        
            // --- CAROUSEL SCRIPT ---
            function setupCarousel(carouselContainer) {
                const track = carouselContainer.querySelector('.carousel-track');
                if (!track) return; // Exit if track not found
                
                const slides = Array.from(track.children);
                if (slides.length === 0) return; // Exit if no slides

                const nextButton = carouselContainer.querySelector('.carousel-button.next');
                const prevButton = carouselContainer.querySelector('.carousel-button.prev');
                
                // Ensure slides[0] exists and has getBoundingClientRect
                if (!slides[0] || typeof slides[0].getBoundingClientRect !== 'function') {
                    console.error('Carousel slides not found or invalid.');
                    return;
                }
                
                let slideWidth = slides[0].getBoundingClientRect().width;
                let currentSlide = 0;

                const moveToSlide = (slideIndex) => {
                    if (!track) return;
                    
                    // Recalculate width just in case, especially for the first load
                    slideWidth = slides[0].getBoundingClientRect().width;
                    if(slideWidth === 0) {
                         // If width is 0, try again shortly
                        setTimeout(() => moveToSlide(slideIndex), 100);
                        return;
                    }

                    track.style.transform = 'translateX(-' + slideWidth * slideIndex + 'px)';
                    currentSlide = slideIndex; // Keep currentSlide in sync
                }
                
                // Re-calculate width on window resize
                window.addEventListener('resize', () => {
                    if (!slides[0]) return;
                    slideWidth = slides[0].getBoundingClientRect().width;
                    if(slideWidth === 0) return;
                    track.style.transition = 'none'; // Disable transition during resize
                    track.style.transform = 'translateX(-' + slideWidth * currentSlide + 'px)';
                    
                    // Re-enable transition after a tiny delay
                    setTimeout(() => {
                        track.style.transition = 'transform 0.5s ease-in-out';
                    }, 50);
                });

                // Next button
                if (nextButton) {
                    nextButton.addEventListener('click', e => {
                        let nextSlide = currentSlide + 1;
                        if (nextSlide > slides.length - 1) {
                            nextSlide = 0; // Loop to first slide
                        }
                        moveToSlide(nextSlide);
                    });
                }

                // Prev button
                if (prevButton) {
                    prevButton.addEventListener('click', e => {
                        let prevSlide = currentSlide - 1;
                        if (prevSlide < 0) {
                            prevSlide = slides.length - 1; // Loop to last slide
                        }
                        moveToSlide(prevSlide);
                    });
                }

                // Auto-play carousel
                // Give each carousel its own interval
                setInterval(() => {
                    if (nextButton) {
                        nextButton.click();
                    }
                }, 4000 + Math.random() * 500); // Add slight random delay

                // Initial move to slide 0
                moveToSlide(0);
            }

            // Initialize all carousels
            document.querySelectorAll('.carousel-container').forEach(setupCarousel);


            // --- NEW WHATSAPP TOGGLE LOGIC ---
            const whatsappContainer = document.getElementById('whatsapp-container');
            const whatsappTrigger = document.getElementById('whatsapp-trigger');

            if (whatsappTrigger && whatsappContainer) {
                whatsappTrigger.addEventListener('click', (e) => {
                    e.stopPropagation(); // Stop click from bubbling to document
                    whatsappContainer.classList.toggle('active');
                });

                // Close when clicking outside
                document.addEventListener('click', (e) => {
                    // Check if the click is outside the container
                    if (!whatsappContainer.contains(e.target)) {
                        whatsappContainer.classList.remove('active');
                    }
                });
            }

            // --- OTHER SCRIPTS ---

            // Set current year in footer
            document.getElementById('currentYear').textContent = new Date().getFullYear();

            // Smooth scroll for nav links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetElement = document.querySelector(this.getAttribute('href'));
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                });
            });
        });